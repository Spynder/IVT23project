Умножение матриц, в отличие от линейных операций, не является такой простой "поэлементной" операцией. С другой стороны, было бы так, от матриц не было бы никакой пользы; это был бы просто упорядоченный 2д список чисел, и никаких красивых следствий от матриц не появилось бы.

Ладно, перейдем к самому умножению - на матрицы накладывается интересное условие.
Пусть даны матрицы $A$ и $B$ размером $m \cross n$ и $n \cross p$ соответственно. Произведением матриц $A$ и $B$ будет называться матрица $С$ размера $m \cross p$. Записывается как $С = AB$. Матрица $C$ такова, что элемент $C_{ij}$ равен произведению $i-$ой строки матрицы $A$ на $j-$ый столбец матрицы $B$:
$$C_{ij} = \sum_{k=1}^n A_{ik} \cdot B_{kj}$$
Эта операция возможна только тогда, когда число столбцов матрицы $А$ равно числу строк матрицы $B$.
Можно представить подсчет произведения $AB$ визуально следующим образом: ставим матрицу $A$ слева, матрицу $B$ наверх. Для каждого пересечения в центре мы считаем произведения левой строки и верхнего столбца.
![[https://upload.wikimedia.org/wikipedia/commons/1/11/Matrix_multiplication_diagram.svg]]
$$\array{& \left(\array{e & f \\ g & h}\right) \\ \left(\array{a & b \\ c & d}\right) & \left(\array{ae + bg & af + bh \\ ce + dg & cf + dh}\right)}$$

Другое визуальное представление произведения матриц - повернуть вторую матрицу на $90^\circ$ против часовой стрелке, и "просеивать" одну матрицу через другую. Впрочем, для визуального представления нужен сам визуал - https://matrixmultiplication.xyz (кто не доверяет предупреждению, вот гитхаб с сайтом: https://github.com/staltz/matrixmultiplication.xyz).

## Пробуем понять смысл умножения
Теперь немного про *смысл* за таким умножением. Матрицы из себя представляют *линейную трансформацию пространства*. Мы уже встречались с такими матрицами - например, матрица поворота или матрица растяжения пространства. Умножая вектор на такую матрицу, мы можем узнать, как будет выглядеть этот вектор *после применения трансформации*.

Например в двухмерном пространстве, базисные вектора изначально имеют координаты $(1; 0)$ и $(0;1)$. Для того чтобы создать матрицу, мы эти вектора записываем в столбики матрицы:
$$\left(\array{1&0\\0&1}\right) \Leftrightarrow \cases{\overline{e_1} = 1 \cdot \overline{i} + 0 \cdot \overline{j} \\ \overline{e_2} = 0 \cdot \overline{i} + 1 \cdot \overline{j}}$$
К слову, такая матрица называется *единичной* - когда все числа на главной диагонали равны единице, а все остальные - нулю.

Скажем, мы хотим повернуть пространство на $90^\circ$ против часовой стрелки. Чтобы узнать матрицу преобразования, все что надо сделать - повернуть базисные вектора: первый станет на место второго, а второй провернется еще на $90^\circ$ против часовой.
$$\cases{\overline{e_1'} = 0 \cdot \overline{i} + 1 \cdot \overline{j} \\ \overline{e_2'} = -1 \cdot \overline{i} + 0 \cdot \overline{j}} \Leftrightarrow \left(\array{0&-1\\1&0}\right)$$
Умножая матрицу на какой-то вектор, мы сможем узнать, куда он попадет после применения трансформации. описанной этой матрицей. Скажем, вектор $(4;2)$ после поворота на $90^\circ$ мы получим, умножив матрицу поворота на $90^\circ$ против часовой стрелки на этот вектор:
$$\left(\array{0&-1\\1&0}\right)\left(\array{4\\2}\right) = \left(\array{0\cdot 4-1 \cdot 2\\1 \cdot 4+0 \cdot 2}\right) = \left(\array{-2\\4}\right)$$
Затем, например, мы хотим растянуть ось $y$ в 2 раза - для этого умножаем вектор на соответствующую матрицу растяжения пространства:
$$\left(\array{1&0\\0&2}\right)\left(\array{-2\\4}\right) = \left(\array{-2\\8}\right)$$
А что если бы мы хотели узнать сразу, куда попадет изначальный вектор после применения двух трансформаций? Мы бы сначала применяли первую матрицу, потом вторую - заметьте, что для трансформаций, матрицы всегда ставятся *слева* - представьте, будто матрицы трансформации это функции. На вход подается вектор, и потом функция его преобразует. Тогда в $f(x)$, $f$ - матрица, а $x$ - вектор. Применение последовательных преобразований уже будет выглядеть как $g(f(x))$ - сначала применяем первое преобразование $f$, и уже потом $g$:
$$\left(\array{1&0\\0&2}\right)\left(\left(\array{0&-1\\1&0}\right)\left(\array{4\\2}\right)\right)$$
Но согласитесь, что преобразовывать вектор сначала поворотом, потом растяжением, постоянно производя длинный процесс перемножения - неудобно. Вот бы была матрица, которая описывала сразу два этих преобразования вместе - всю композицию изменений пространства? Вот для этого и нужно *умножение матриц*.
$$\left(\array{1&0\\0&2}\right)\left(\array{0&-1\\1&0}\right)$$

В первую очередь, умножение матриц - это группирование умножений векторов - если мы посмотрим, куда попадут базисные вектора одной трансформации после применения другой, они опишут *композицию* этих преобразований.:
$$\left[\array{\left(\array{1&0\\0&2}\right)\left(\array{0\\1}\right) & & &\left(\array{1&0\\0&2}\right)\left(\array{-1\\0}\right)}\right]$$
Геометрический смысл перемножения матриц - последовательное применение линейных трансформаций пространства. Скажем, мы хотим сначала применить поворот, затем растяжение оси $y$ в 2 раза. Для этого мы перемножаем матрицу, причем первая трансформация будет стоять справа (помним аналогию с функциями!):
$$\left(\array{1&0\\0&2}\right)\left(\array{0&-1\\1&0}\right) = \left(\array{0&-1\\2&0}\right)$$
На выходе получается матрица, описывающая сразу два этих преобразования. Теперь подсчет сложного преобразования вектора не составит труда:
$$\left(\array{0&-1\\2&0}\right)\left(\array{4\\2}\right) = \left(\array{-2 \\ 8}\right)$$

## Пример задачи
Условие: найдите произведение матриц $AB$, где $$A = \left(\array{1 & 2 & 2 \\ 3 & 1 & 1}\right) \ \ \ \ \ \ \ \ \ \ B =\left(\array{4 & 2 \\ 3 & 1 \\ 1 & 5}\right)$$

Решение: в $A$ 2 строки, в $B$ 2 столбика. Значит, произведением будет матрица $2 \cross 2$.
$$AB = \left(\array{1\cdot 4 + 2 \cdot 3 + 2 \cdot 1 & 1 \cdot 2 + 2 \cdot 1 + 2 \cdot 5 \\ 3 \cdot 4 + 1 \cdot 3 + 1 \cdot 1 & 3 \cdot 2 + 1 \cdot 1 + 1 \cdot 5}\right) = \left(\array{12 & 14 \\ 16 & 12}\right)$$

---
Условие: найдите произведение матриц $AB$, где $$A = \left(\array{4 & 2 \\ 3 & 1 \\ 1 & 5}\right) \ \ \ \ \ \ \ \ \ \ B =\left(\array{1 & 2 & 2 \\ 3 & 1 & 1}\right)$$

Решение: в $A$ 3 строки, в $B$ 3 столбика. Значит, произведением будет матрица $3 \cross 3$.
$$AB = \left(\array{4 \cdot 1 + 2 \cdot 3 & 4 \cdot 2 + 2\cdot1 & 4 \cdot 2 + 2 \cdot 1 \\ 3 \cdot 1 + 1 \cdot 3 & 3 \cdot 2 + 1 \cdot 1 & 3 \cdot 2 + 1 \cdot 1 \\ 1 \cdot 1 + 5 \cdot 3 & 1 \cdot 2+ 5 \cdot 1 & 1 \cdot 2 + 5 \cdot 1}\right) = \left(\array{10 & 10 & 10 \\ 6 & 7 & 7 \\ 16 & 7 & 7}\right)$$
